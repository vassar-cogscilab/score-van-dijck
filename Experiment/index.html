<!DOCTYPE html>
<html>
  <head>
    <script src="jspsych-6.1.0/jspsych.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
    <link rel="stylesheet" type="text/css" href="jspsych-6.1.0/css/jspsych.css">
  </head>
  <body>
  </body>
  <script>

  var timeline = [];

  var baseline_task_odd_left = {
    timeline: [
      {
        type: 'html-keyboard-response',
        stimulus: '<p>+</p>',
        trial_duration: 500,
        choices: jsPsych.NO_KEYS
      },
      {
        type: 'html-keyboard-response',
        stimulus: jsPsych.timelineVariable('digit'),
        choices: ['a', 'l'],
        data: {
          correct_response: jsPsych.timelineVariable('target_response'),
          parity: jsPsych.timelineVariable('parity')
        },
        on_finish: function(data){
          data.correct = data.correct_response == jsPsych.pluginAPI.convertKeyCodeToKeyCharacter(data.key_press);
        }
      },
      {
        type: 'html-keyboard-response',
        stimulus: function(){
          if(jsPsych.data.get().last(1).values()[0].correct){
            return '<p>+</p>';
          } else {
            return '<p style="color: red;">+</p>';
          }
        },
        trial_duration: 250,
        choices: jsPsych.NO_KEYS,
        post_trial_gap: 250
      }
    ],
    timeline_variables: [
      {digit: 1, parity: 'odd', target_response: 'a'},
      {digit: 2, parity: 'even', target_response: 'l'},
      {digit: 3, parity: 'odd', target_response: 'a'},
      {digit: 4, parity: 'even', target_response: 'l'},
      {digit: 6, parity: 'even', target_response: 'l'},
      {digit: 7, parity: 'odd', target_response: 'a'},
      {digit: 8, parity: 'even', target_response: 'l'},
      {digit: 9, parity: 'odd', target_response: 'a'},
    ],
    randomize_order: true,
    repetitions: 16
  }

  timeline.push(baseline_task_odd_left);

  jsPsych.init({
    timeline: timeline
  })


  </script>
</html>